<!DOCTYPE html>
<html lang="ja">
<head>
  <title>Chart.js TEST</title>
  <meta charset="UTF-8">
</head>
<body>
  <h1>Chart.jsのテスト</h1>

  <div style="width: 50%">
    <canvas id="chart" height="450" width="600"></canvas>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/1.0.2/Chart.min.js"></script>
  <!-- もしくは<script src="Chart.min.js"></script> -->
  <script>
  var API_END_POINT = "https://script.google.com/macros/s/AKfycbw3L1MfE0SPj0Nd-oQH3ePD8pxqPUEomJ94jvJ-5UcT6AFEDt39/exec"
  var requestAjax = function(endpoint, callback) {
    var xhr = new XMLHttpRequest();
    xhr.onreadystatechange = function(){
      if (this.readyState==4 && this.status==200) {
        callback(this.response);
      }
    };
    xhr.responseType = 'json';
    xhr.open('GET',endpoint,true);
    xhr.send();
  }; 

  window.onload = function(){
    var ctx = document.getElementById("chart").getContext("2d");
    requestAjax(API_END_POINT, function(response){
      var labels = response.map(function(element, index, array) {
        return element["date"];
      });
      var datas = response.map(function(element, index, array) {
        return element["data"];
      });
      console.dir(labels);
      console.dir(datas);
    });
    window.myLine = new Chart(ctx).Line(lineChartData, {
      responsive: true
      // 下記を追加すると線がまっすぐになります
      /* bezierCurve: false */
    });
  }
  
  
  var drawGraph = function(id, today, yesterday, labels){
  var ctx = document.getElementById(id).getContext('2d');

  var line1 = { 
    label:'Today', 
    data:today,
    fill: false,
    lineTension: 0,
    backgroundColor: "#DE4E33",
    borderColor: "#DE4E33",
    pointHoverBackgroundColor: "#DE4E33",
    pointHoverBorderColor: "#DE4E33",
  };

  // ラベル(横軸)
  var label = labels;
  var xAxes = [{ 
    gridLines:{
      color: "#5f5f5f",
    },
    ticks: {
      fontColor: "#aaa",
      fontSize: 12
    }
  }]
  var yAxes = [{ 
    gridLines:{
      color: "#5f5f5f",
    },
    ticks: {
      fontColor: "#aaa",
      fontSize: 15,
    }
  }]
  var scales = {xAxes, yAxes};
  var legend = {labels:{fontColor:"#eee", fontSize: 15}, position:"bottom"};
  // グラフ全体の設定
  var option = {scales, legend};
  
  // データの設定
  var config = {
    type: 'line',
    data: { labels: label, datasets: [line1]},
    options: option,
    
  }
  var myChart = new Chart(ctx, config);
};
  
  </script>
</body>
</html>
